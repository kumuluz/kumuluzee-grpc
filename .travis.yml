language: java
dist: trusty
jdk:
- openjdk8
env:
  global:
  - secure: "twA7I2jbJDMRHQj3NDvcWlRDnfmp9UH3dn4Wxbu+R88LENLjfnsK2U51yd5IFezW2PbPhfmvwWs+3rHnMe6wwxE4NHR0zoIUvG6orB6c+SnxuU1HZVFRPV6aeLkwVTU8wX2gHce59jsG62OGEDHefxj9CFCCN/9rAXiky1GobmbEV4FFw0DNrP6Uo3ycytAKTdDCxqAWgbJmPlt63CiNdhdeJrulfh5QisVEzoYVpt5K8KANpMgz/p4VhuIkObHXJIZbqj+L2UgHxIJSqn7/llKe6q/H7oGftGXyxoDwLCSFy9jc9Ad7gqud6SHcTxYDT+WX7rK+dejf/9SWVs2IaYKEeYkX2ypOvzi8iEXEGZnHmkLX5hE6dqKUq3EHC6W/3CjVZyymRpFEJnBWZWRGkeQ6iuhcXyD9vwBTn6V2obPdE6MwG3ZLRvuDVzxmaipEbaWHvi+LRlL0cXxvqlI4t547JJkjQFkNv8Zw5K1sar45N3mXZgBUt9aUrIIb8y4h4+nhuoyo2an7p98TTxcduxNG/e6DjNtMWezupVstIXV4GJDQ3Hi2GwdAZ0ebJDMHD4tXJRcxEmACZFiXT9zWSdrmhSTLu2ohyLgpGeS+13Ey9oRT3+Lu/W7TqxbZ7sQjDw4olmcqAPOP+TkTkmo4QyQ0dgxVICJmU6rJCaOXmKI="
  - secure: "g+S3MfaSY1FBFpettgkECwahLVJqKQAMqlo1CpQYMphbn5aB7OH2Cc5/5z4WL7NE1fCeuM2pn8L+47TyzSnlg3eJzjyNcIzuT1dCYKKLcNwQHaBZ1GFxuDF1dZ9U9wG/MUxkBSAMDhim/ZGbpIJm56y9HPpix064okiGjMBkfOPSO2ZAoLTA/I+CM3knZFhBkDWgBJYwW2BESn3YobzwBMymnDLUFYTnxsjh5TgonSIX7Mp/TmG478UCahOKP1U9bEymghy9ZXwd97+Ji+1+hSM4Kv8efBH36W9Tz7xhjr66pbMuWUzFQJkpjX8CdOoWP9d1YyNl3ANvSC85sNLsfh5JI58rRkgP48NQ9MWVbsCZc48QpmoKVqhKLPSgnQH0lTUN5K2U/oFTUv4SxgDSKKZ6abBY66xoRHoTH/bxCxYTSwatFqDvufMseBE7uoYe+QNKErXhaDa9XqXccED8aL+KcmxXDY/3eG1Gu8sEQ9YhlTPMqwRd9ggVlDhBRwKWlOttLfu7Id7BE64u/E1XcJLdmbQk0UFSBc9ZQhag+N926KOzM8mtGvRp4i32wgZaciXaqriKxu6v1OqKF6pu2PDzQsZYoeao/k99b26QOhEuLKtkT3lwzuWyjfJ/ibMeHtfuNcPq26Estt/tB14VMNa1489sH2NdfdaRYWgKSwQ="
  - secure: "TJaSIH/Wmb2W7DfmE8XkfKc+hDCnkdcamZWlh6ff89/UtAlHlZqCuWT/kl3ExMdjpz9rXyxdceYJkH55FyXtecZx6JeudSOeMc67ZmWPZ5rvgvWqD1MdDxev8946yrWtYLcpo8WkhOFn0x75B1RD+DqgNni4eCj7l8cyyHQrWcUkKm+fwKX6h8VBAObecufEnu39V1vR41XVA9TIbp8ubkUviUIKQJ1D6KqWuyXPcK5nyay/sH4UUaefdLeeClyucX1JCT3Fh6Y963tBbfq8j0VPfTrPccDekFVBoNqsU7aVNzj/XUhhCzBdojlEHvMG7RUk65f9Do/C31lvpa+B/T94UakLre1GkZf/LCXk1J2BcM7t6AL7YYNL8F7GRkg8tLadGVnjbQz2DUT/K3KmOxP0uURGzMBA+KUl/oAhXbTSUi3hhK8wBvySI4T+HsxBcKTZ+f85aIc0hbgZRfZx1RsN+VzLYv4isnTdLTxVjRwO0xIpFbkxW2A0xLA3nACqeWCv3GVseTfeEDzAeQyyUy+T3TtervBPHxm4Y0o/jfQVgctlqtppAh/pVpLJ7gpO9ya9+6A0rJibozid3PlO/lzCSAhc0uftM7vc14qORct3VZnOqb8pRbZ0tlYxMZn1rrbCVjMc3/PUk3591U7q5sLrtyusnFzs1hKBnlE24xQ="
cache:
  directories:
  - "$HOME/.m2"
install: mvn clean install -DskipTests=true -V -U
script: mvn test
after_success:
- if [[ $TRAVIS_PULL_REQUEST == "false" && ($TRAVIS_BRANCH == "master" || $TRAVIS_TAG)
  ]]; then openssl aes-256-cbc -K $encrypted_5c8d100818d6_key -iv $encrypted_5c8d100818d6_iv
  -in gpg.tar.gz.enc -out gpg.tar.gz -d; tar xvf gpg.tar.gz; mvn source:jar javadoc:jar
  deploy -Pdeploy -DskipTests=true --settings ./settings.xml; fi
